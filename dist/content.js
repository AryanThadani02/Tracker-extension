(()=>{let e=!1;document.addEventListener("click",(async function(t){!e&&chrome.runtime?.id&&await new Promise((e=>{const t=window.location.hostname.replace("www.","");chrome.storage.sync.get(["allowedDomains"],(function(o){const n=o.allowedDomains||[];e(n.some((e=>t.includes(e))))}))}))&&function(){try{e=!0,chrome.runtime.sendMessage({action:"captureFullPage",totalHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),viewportHeight:window.innerHeight,originalScrollTop:window.scrollY})}catch(t){console.error("Error in capture:",t),e=!1}}()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.createElement("button");e.textContent="Take Screenshot",e.style.position="fixed",e.style.top="10px",e.style.right="10px",e.style.zIndex="10000",document.body.appendChild(e),e.addEventListener("click",(()=>{console.log("Screenshot button clicked");const e=document.documentElement.scrollHeight,t=window.innerHeight,o=window.scrollY;console.log("Sending message to background:",{action:"captureFullPage",totalHeight:e,viewportHeight:t,originalScrollTop:o}),chrome.runtime.sendMessage({action:"captureFullPage",totalHeight:e,viewportHeight:t,originalScrollTop:o})}))}))})();